$("#sidebar").mCustomScrollbar({theme:"minimal"}),$("#dismiss, .overlay").on("click",function(){$("#sidebar").removeClass("active"),$(".overlay").removeClass("active")}),$("#sidebarCollapse").on("click",function(){$("#sidebar").addClass("active"),$(".overlay").addClass("active"),$(".collapse.in").toggleClass("in"),$("a[aria-expanded=true]").attr("aria-expanded","false")}),mapboxgl.accessToken="pk.eyJ1IjoidGhvbWFzMzMiLCJhIjoiY2pzYWFpcXNwMDAxbzN5cGZneGxia3U3ZCJ9.sigYT2nlLnC1siycJ3im-Q";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[4.8320114,45.7578137],zoom:15}),urlAPI="http://localhost/projects/velocity/api";function formSubmitPopup(e){e.preventDefault(),$.ajax({type:"POST",url:`${urlAPI}/test.php`,data:"test",success:function(e){console.log(e)}})}$.ajax({type:"GET",url:"https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=18125dec00ffb281d822ceefb633311dc8ba4d7d",success:function(e){console.log(e),e.forEach(function(e){var a=document.createElement("div");a.id="marker";var s=new mapboxgl.Popup({offset:25}).setHTML(`  <div id="popup">\n                            <h5 class="popupTitle">${e.name}</h5> \n                            <h6 class="popupSubtitle">${e.address}</h6>\n                            <div class="row popupContent">\n                                <div class="col-6">\n                                    ${e.available_bikes} <i class="fas fa-bicycle"></i>\n                                </div>\n                                <div class="col-6 text-right">\n                                    ${e.status}\n                                </div>\n                            </div>\n\n                            <div class="text-center">\n                            <form onSubmit="formSubmitPopup(event)">\n                                <input class="btn btn-sm btn-light" type="submit" value="RESERVER">\n                            </form>\n                            </div>\n                        </div>\n                    `);new mapboxgl.Marker(a).setLngLat(e.position).setPopup(s).addTo(map)})},error:function(e){console.error()}});urlAPI="http://localhost/projects/velocity/api";$("#formLogin").submit(function(e){e.preventDefault(),serializeFormLogin=$(this).serialize(),$.ajax({type:"post",url:`${urlAPI}/checkUser.php`,data:serializeFormLogin,success:function(e){if((e=JSON.parse(e))[0].username){$("#landing").hide(),$(".modal-backdrop").hide(),$("#map").show();var a=$("#map"),s=$(".mapboxgl-canvas");a.css("width","100%"),s.css("width","100%"),map.resize()}}})});urlAPI="http://localhost/projects/velocity/api";$("#formSignup").submit(function(e){e.preventDefault(),serializeFormSignup=$(this).serialize(),$.ajax({type:"post",url:`${urlAPI}/signUser.php`,data:serializeFormSignup,success:function(e){if((e=JSON.parse(e))[0].username){$("#landing").hide(),$(".modal-backdrop").hide(),$("#map").show();var a=$("#map"),s=$(".mapboxgl-canvas");a.css("width","100%"),s.css("width","100%"),map.resize()}}})});